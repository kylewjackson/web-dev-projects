{"version":3,"sources":["Icons.js","App.js","serviceWorker.js","index.js"],"names":["CartIcon","props","viewBox","fill","fillColor","xmlns","fillRule","clipRule","d","CloseArrowIcon","StarIcon","StarOutline","stroke","strokeColor","StarHalf","PlusIcon","MinusIcon","x","width","height","rx","transform","ThumbsUpIcon","opacity","ThumbsDownIcon","imagePath","deepCopy","ele","JSON","parse","stringify","genThumbs","amt","def","Array","map","pic","i","colorWhite","colorBlack","colorDarkGrey","colorYellow","colorRed","transformId","match","whitespace","split","toLowerCase","join","itemOptions","opt","name","id","currentProduct","prodName","prodId","qty","price","thumb","initInCart","forEach","item","maxQty","initReviews","user","rating","rated","publishedRating","review","hidden","feedback","up","down","date","Date","toLocaleDateString","dateStyle","timeStyle","sort","a","b","maxRating","freshState","parseInt","stars","loggedIn","openLogin","openSignup","userId","reviewBody","reviewSubmitted","edit","itemsInCart","cartClosed","Modal","buttonFocus","React","createRef","container","keydownCallback","e","key","handleModal","act","clickCallback","target","current","this","show","focus","document","body","style","overflow","addEventListener","removeEventListener","showButton","btn","rmv","type","ref","onClick","className","role","aria-labelledby","img","src","alt","msg","Component","Header","Navbar","modal","navOpen","itemCount","toggleMenu","preventEnter","handleInput","handleButton","handleFocus","handleSubmit","handleUsername","handleLogin","tabIndex","NavLinks","LogIn","NavCart","Cart","onSubmit","htmlFor","value","placeholder","onChange","required","aria-label","toString","length","InCart","Total","Checkout","CloseCart","items","opts","listItems","ind","CartProduct","index","indexOf","ProductForm","cart","onKeyPress","Options","Quantity","RemoveItem","AddToCart","checkIfInCart","toFixed","min","max","onFocus","add","disabled","subTotal","reduce","y","tax","finalTotal","Main","ratedReviews","reviews","filter","avgRating","avgStars","Math","floor","wholeStars","halfStar","round","emptyStars","ProductInfo","subthumbs","reviewCount","whole","half","empty","ReviewDisplay","checkFeedback","editReview","editOpen","avg","handleText","handleFilterReviews","Thumbnails","mainThumb","Rating","kind","section","reviewer","ReviewsLink","Description","Price","SubThumbnails","subthumb","displayRating","ratingToShow","push","Star","starVariants","checkedCart","dupeInCart","hasDupe","qtyInCart","dupeIndex","qtyTogther","ProductReviews","WriteProductReview","Reviews","currentUser","reviewList","reviewToShow","Review","publishedReview","ReviewFilter","ReviewRatings","ratingsSort","ReviewRatingInputs","val","checked","num","toUpperCase","Feedback","thumbed","data-user","disableEdit","WriteReview","cols","rows","maxLength","defaultValue","Footer","href","App","state","modalImg","modalMsg","modalBtn","prevEle","bind","params","prev","setState","starFilter","handleOptions","itemArray","arrayToCheck","itemToCheck","splice","addItem","select","which","preventDefault","itemToAdd","some","userReview","combineCarts","querySelector","userToAdd","concat","userCart","reviewFeedback","userReviews","reviewArray","obj","currentCart","duplicateItems","dupe","customCart","loop","totalQty","combinedCart","currentTarget","reviewsArr","userToRate","updatedReview","updateRated","updatedArray","submittedReview","toggle","custom","reviewsToFilter","sortOption","text","Boolean","window","location","hostname","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.3f62f29f.chunk.js","sourcesContent":["import React from 'react';\n\nfunction CartIcon(props) {\n    return (\n        <svg viewBox=\"0 0 161 118\" fill={props.fillColor} xmlns=\"http://www.w3.org/2000/svg\">\n        <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M29.7455 118C36.3729 118 41.7455 112.627 41.7455 106C41.7455 99.3726 36.3729 94 29.7455 94C23.118 94 17.7455 99.3726 17.7455 106C17.7455 112.627 23.118 118 29.7455 118ZM29.7559 99C33.6276 99 36.7663 102.139 36.7663 106.01C36.7663 109.882 33.6276 113.021 29.7559 113.021C25.8841 113.021 22.7455 109.882 22.7455 106.01C22.7455 102.139 25.8841 99 29.7559 99Z\" fill={props.fillColor}/>\n        <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M120.745 118C127.373 118 132.745 112.627 132.745 106C132.745 99.3726 127.373 94 120.745 94C114.118 94 108.745 99.3726 108.745 106C108.745 112.627 114.118 118 120.745 118ZM120.756 99C124.628 99 127.766 102.139 127.766 106.01C127.766 109.882 124.628 113.021 120.756 113.021C116.884 113.021 113.745 109.882 113.745 106.01C113.745 102.139 116.884 99 120.756 99Z\" fill={props.fillColor}/>\n        <path d=\"M128.912 95.5984C138.245 104 137.836 67.6774 127.338 72.4913C124.713 78.7495 131.839 81.1565 128.912 95.5984Z\" fill={props.fillColor}/>\n        <path d=\"M14.7455 94.5C14.7455 93.1193 15.8647 92 17.2455 92H131.245C132.626 92 133.745 93.1193 133.745 94.5C133.745 95.8807 132.626 97 131.245 97H17.2455C15.8647 97 14.7455 95.8807 14.7455 94.5Z\" fill={props.fillColor}/>\n        <path d=\"M132.324 24.1614L141.207 8.77422H156.486C158.442 8.77422 160.029 7.18795 160.029 5.23118V3.54303C160.029 1.58627 158.442 0 156.486 0H139.274C138.893 0 138.526 0.060201 138.182 0.171615C136.926 0.13972 135.692 0.778166 135.02 1.94258L125.745 18.0066H127.324C130.085 18.0066 132.324 20.2452 132.324 23.0066V24.1614Z\" fill={props.fillColor}/>\n        <path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M5.00209 18C1.7958 18 -0.581876 20.9752 0.125178 24.1026L10.8971 71.7478C11.3972 73.9598 13.3235 75.5582 15.5897 75.6418L128.561 79.8087C131.393 79.9132 133.745 77.6458 133.745 74.8121V23C133.745 20.2385 131.507 18 128.745 18H5.00209ZM15.0154 23C11.8048 23 9.42628 25.9826 10.1407 29.1126L18.4087 65.3342C18.9043 67.5054 20.7761 69.087 22.9994 69.2135L119.462 74.6995C122.33 74.8626 124.745 72.5806 124.745 69.7075V28C124.745 25.2385 122.507 23 119.745 23H15.0154Z\" fill={props.fillColor}/>\n        <path d=\"M7.74546 29H124.473V31H7.74546V29Z\" fill={props.fillColor}/>\n        <path d=\"M7.74546 41H124.473V43H7.74546V41Z\" fill={props.fillColor}/>\n        <path d=\"M7.74546 53H124.473V55H7.74546V53Z\" fill={props.fillColor}/>\n        <path d=\"M12.7455 65H124.745V67H12.7455V65Z\" fill={props.fillColor}/>\n        <path d=\"M125.745 21V76H123.2L123.2 21H125.745Z\" fill={props.fillColor}/>\n        <path d=\"M109.2 21L109.2 76H106.655L106.655 21H109.2Z\" fill={props.fillColor}/>\n        <path d=\"M92.6545 21V76H90.1091L90.1091 21H92.6545Z\" fill={props.fillColor}/>\n        <path d=\"M76.1091 21V76H73.5636V21H76.1091Z\" fill={props.fillColor}/>\n        <path d=\"M59.7455 20L59.7455 75H56.7455L56.7455 20H59.7455Z\" fill={props.fillColor}/>\n        <path d=\"M42.7455 21L42.7455 71H40.7455L40.7455 21H42.7455Z\" fill={props.fillColor}/>\n        <path d=\"M26.7455 21L26.7455 71H23.7455L23.7455 21H26.7455Z\" fill={props.fillColor}/>\n        </svg>\n    );\n};\n\nfunction CloseArrowIcon(props) {\n    return (\n        <svg viewBox=\"0 0 44 22\" fill={props.fillColor} xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M23.3354 1.19782C22.5756 0.516274 21.4244 0.516275 20.6646 1.19782L1.64095 18.2612C0.275219 19.4862 1.14175 21.75 2.97637 21.75L41.0236 21.75C42.8583 21.75 43.7248 19.4862 42.3591 18.2612L23.3354 1.19782Z\" fill={props.fillColor}/>\n        </svg>\n    );\n};\n\nfunction StarIcon(props) {\n    return (\n        <svg viewBox=\"0 0 31 29\" fill={props.fillColor} xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M15.5 0L18.98 10.7102H30.2414L21.1307 17.3295L24.6107 28.0398L15.5 21.4205L6.38933 28.0398L9.8693 17.3295L0.758625 10.7102H12.02L15.5 0Z\" fill={props.fillColor}/>\n        </svg>\n    );\n};\n\n    function StarOutline(props) {\n        return (\n            <svg viewBox=\"0 0 31 29\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M15.5 1.61804L18.5044 10.8647L18.6167 11.2102H18.98H28.7025L20.8368 16.925L20.5429 17.1385L20.6552 17.484L23.6596 26.7307L15.7939 21.016L15.5 20.8024L15.2061 21.016L7.34039 26.7307L10.3448 17.484L10.4571 17.1385L10.1632 16.925L2.29747 11.2102H12.02H12.3833L12.4956 10.8647L15.5 1.61804Z\" stroke={props.strokeColor} />\n            </svg>\n        );\n    };\n\n    function StarHalf(props) {\n        return (\n            <svg viewBox=\"0 0 31 31\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M15.5 1.61804L18.5044 10.8647L18.6167 11.2102H18.98H28.7025L20.8368 16.925L20.5429 17.1385L20.6552 17.484L23.6596 26.7307L15.7939 21.016L15.5 20.8024L15.2061 21.016L7.34039 26.7307L10.3448 17.484L10.4571 17.1385L10.1632 16.925L2.29747 11.2102H12.02H12.3833L12.4956 10.8647L15.5 1.61804Z\" stroke={props.strokeColor}/>\n            <path d=\"M6.38931 28.0398L15.5 21.4205V0L12.02 10.7102H0.758606L9.86928 17.3295L6.38931 28.0398Z\" fill={props.fillColor} />\n            </svg>\n        );\n    };\n\n    function StarHalfNoOutline(props) {\n        return (\n            <svg viewBox=\"0 0 16 29\" fill={props.fillColor} xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M6.38931 28.0398L15.5 21.4205V0L12.02 10.7102H0.758606L9.86928 17.3295L6.38931 28.0398Z\" fill={props.fillColor}/>\n            </svg>\n        );\n    };\n\nfunction PlusIcon(props) {\n    return (\n        <svg viewBox=\"0 0 10 10\" fill={props.fillColor} xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M3.71428 1.28571C3.71428 0.575634 4.28991 0 5 0C5.71008 0 6.28571 0.575634 6.28571 1.28571V8.71429C6.28571 9.42437 5.71008 10 5 10C4.28991 10 3.71428 9.42437 3.71428 8.71429V1.28571Z\" fill={props.fillColor}/>\n        <path d=\"M8.71429 3.71427C9.42437 3.71427 10 4.2899 10 4.99998C10 5.71006 9.42437 6.2857 8.71429 6.2857L1.28571 6.2857C0.575634 6.2857 -3.10386e-08 5.71006 0 4.99998C3.10386e-08 4.2899 0.575634 3.71427 1.28571 3.71427L8.71429 3.71427Z\" fill={props.fillColor}/>\n        </svg>\n    );\n};\n\nfunction MinusIcon(props) {\n    return (\n        <svg viewBox=\"0 0 10 3\" fill={props.fillColor} xmlns=\"http://www.w3.org/2000/svg\">\n        <rect x=\"10\" width=\"2.57143\" height=\"10\" rx=\"1.28571\" transform=\"rotate(90 10 0)\" fill={props.fillColor}/>\n        </svg>\n    );\n};\n\nfunction ThumbsUpIcon(props) {\n    return (\n        <svg viewBox=\"0 0 21 21\" fill={props.fillColor} opacity={props.opacity ? props.opacity : 1} xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M19.0364 8.95659C19.0364 8.95659 14.7836 8.95659 13.447 8.59774C12.1104 8.23888 8.34368 8.47812 8.34368 8.47812V20.44H19.0364V8.95659Z\" fill={props.fillColor}/>\n        <path d=\"M20.4814 10.0747C20.4814 9.40901 19.9498 8.86939 19.294 8.86939H15.3572C14.7014 8.86939 14.1698 9.40901 14.1698 10.0747C14.1698 10.7403 14.7014 11.2799 15.3572 11.2799H19.294C19.9498 11.2799 20.4814 10.7403 20.4814 10.0747Z\" fill={props.fillColor}/>\n        <path d=\"M21 12.8888C21 12.1107 20.3786 11.48 19.6121 11.48H16.0763C15.3098 11.48 14.6884 12.1107 14.6884 12.8888C14.6884 13.6668 15.3098 14.2975 16.0763 14.2975H19.6121C20.3786 14.2975 21 13.6668 21 12.8888Z\" fill={props.fillColor}/>\n        <path d=\"M21 15.9688C21 15.1907 20.3786 14.56 19.6121 14.56H16.0763C15.3098 14.56 14.6884 15.1907 14.6884 15.9688C14.6884 16.7468 15.3098 17.3775 16.0763 17.3775H19.6121C20.3786 17.3775 21 16.7468 21 15.9688Z\" fill={props.fillColor}/>\n        <path d=\"M20.5145 19.0312C20.5145 18.2532 19.8931 17.6225 19.1266 17.6225H15.5908C14.8243 17.6225 14.2029 18.2532 14.2029 19.0312C14.2029 19.8093 14.8243 20.44 15.5908 20.44H19.1266C19.8931 20.44 20.5145 19.8093 20.5145 19.0312Z\" fill={props.fillColor}/>\n        <path d=\"M11.5684 4.14526C11.8955 3.10605 12.1292 -0.389479 14.2323 0.0356662C15.3461 0.260839 14.9858 3.49484 14.4803 5.95184C14.2438 7.10149 12.8066 8.15737 13.447 8.68L8.34368 8.54L11.5684 4.14526Z\" fill={props.fillColor}/>\n        <path d=\"M5.58511 7.84H2.81878C2.13143 7.84 1.54898 8.35368 1.45301 9.04452L0.0137646 19.4045C-0.103294 20.2471 0.541181 21 1.37954 21H5.58511C6.34687 21 6.9644 20.3732 6.9644 19.6V9.24C6.9644 8.4668 6.34687 7.84 5.58511 7.84Z\" fill={props.fillColor}/>\n        </svg>\n    );\n};\n\nfunction ThumbsDownIcon(props) {\n    return (\n        <svg viewBox=\"0 0 21 21\" fill={props.fillColor} opacity={props.opacity ? props.opacity : 1} xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M1.96358 12.0434C1.96358 12.0434 6.21637 12.0434 7.55296 12.4023C8.88956 12.7611 12.6563 12.5219 12.6563 12.5219V0.559999H1.96358V12.0434Z\" fill={props.fillColor}/>\n        <path d=\"M0.518612 10.9253C0.518612 11.591 1.05025 12.1306 1.70605 12.1306H5.64278C6.29859 12.1306 6.83022 11.591 6.83022 10.9253C6.83022 10.2597 6.29858 9.72007 5.64278 9.72007H1.70605C1.05025 9.72007 0.518612 10.2597 0.518612 10.9253Z\" fill={props.fillColor}/>\n        <path d=\"M0 8.11124C0 8.88928 0.621389 9.52 1.38791 9.52H4.9237C5.69022 9.52 6.31161 8.88928 6.31161 8.11124C6.31161 7.33321 5.69022 6.70249 4.9237 6.70249H1.38791C0.621389 6.70249 0 7.33321 0 8.11124Z\" fill={props.fillColor}/>\n        <path d=\"M0 5.03124C0 5.80928 0.621389 6.44 1.38791 6.44H4.9237C5.69022 6.44 6.31161 5.80928 6.31161 5.03124C6.31161 4.25321 5.69022 3.62249 4.9237 3.62249H1.38791C0.621389 3.62249 0 4.25321 0 5.03124Z\" fill={props.fillColor}/>\n        <path d=\"M0.485512 1.96876C0.485512 2.7468 1.1069 3.37752 1.87342 3.37752H5.40921C6.17573 3.37752 6.79712 2.7468 6.79712 1.96876C6.79712 1.19073 6.17573 0.560003 5.40921 0.560003H1.87342C1.1069 0.560003 0.485512 1.19073 0.485512 1.96876Z\" fill={props.fillColor}/>\n        <path d=\"M9.43162 16.8547C9.10447 17.8939 8.8708 21.3895 6.76773 20.9643C5.65387 20.7392 6.01425 17.5052 6.5197 15.0482C6.75621 13.8985 8.19344 12.8426 7.55296 12.32L12.6563 12.46L9.43162 16.8547Z\" fill={props.fillColor}/>\n        <path d=\"M15.4149 13.16H18.1812C18.8686 13.16 19.451 12.6463 19.547 11.9555L20.9862 1.59548C21.1033 0.752867 20.4588 0 19.6205 0H15.4149C14.6531 0 14.0356 0.626802 14.0356 1.4V11.76C14.0356 12.5332 14.6531 13.16 15.4149 13.16Z\" fill={props.fillColor}/>\n        </svg>\n    );\n};\n\nexport {CartIcon, CloseArrowIcon, StarIcon, StarOutline, StarHalf, StarHalfNoOutline, PlusIcon, MinusIcon, ThumbsUpIcon, ThumbsDownIcon};","import React from 'react';\nimport './App.css';\nimport {CartIcon, CloseArrowIcon, StarIcon, StarOutline, StarHalf, PlusIcon, MinusIcon, ThumbsUpIcon, ThumbsDownIcon} from './Icons';\n\nconst imagePath = process.env.PUBLIC_URL + '/images/';\n\n// deep copy helper for arrays\nfunction deepCopy(ele) {\n  return JSON.parse(JSON.stringify(ele));\n};\n\n//shallow clone\n// function shallowClone(obj) {\n//   return Object.create(\n//       Object.getPrototypeOf(obj),\n//       Object.getOwnPropertyDescriptors(obj)\n//   );\n// };\n\n//generate thumbnails\nfunction genThumbs(amt, def) {\n  return Array(amt).fill(def).map((pic, i) => `${imagePath}${pic}-${i + 1}.jpg`);\n};\n\n//colors\nconst colorWhite = '#EFEFEF';\nconst colorBlack = '#0F0F0F';\nconst colorDarkGrey = '#383838';\nconst colorYellow = '#FFF59B';\nconst colorRed =  '#9E1800';\n\n//regex\nfunction transformId(ele) {\n  const symbols = /[-!$%^&*()_+|~=`{}[\\]:\";'<>?,./]/;\n  if (ele.match(symbols)) {\n    return false;\n  } else {\n    const whitespace = /\\s/g;\n    return ele.split('').map(i => i.match(whitespace) ? '-' : i.toLowerCase()).join('');\n  };\n};\n\n//product options\nconst itemOptions = Array(3).fill(null).map((opt, i) => {\n  return {name: `Option ${i + 1}`, id: `opt-${i + 1}`}\n});\n\n//info of the product on current page\nconst currentProduct = {\n  prodName: 'Your Product',\n  prodId: null,\n  opt: '',\n  qty: 1,\n  price: 10.50,\n  thumb: genThumbs(3, 'jar'),\n};\n\ncurrentProduct.prodId = transformId(currentProduct.prodName);\n\n//items initially in cart\nconst initInCart = [\n  {\n    prodName: 'Product 1',\n    prodId: null,\n    opt: itemOptions[2].id,\n    qty: 1,\n    price: 29.99,\n    thumb: genThumbs(3, 'notebook'),\n  },\n  {\n    prodName: 'Product 2',\n    prodId: null,\n    opt: itemOptions[1].id,\n    qty: 3,\n    price: 11.45,\n    thumb: genThumbs(3, 'necklace'),\n  },\n];\n\ninitInCart.forEach(item => item.prodId = transformId(item.prodName));\n\n//max qty of items in cart\nconst maxQty = 9;\n\n//initial revies\nconst initReviews = [\n  {\n    user: 'Cool User',\n    id: null,\n    rating: 4,\n    rated: [],\n    publishedRating: 4,\n    review: \"I love this product sooooo much, what would I do without it??\",\n    hidden: false,\n    feedback: {up: 38, down: 2},\n    date: new Date(2018, 3, 10, 7, 45, 16).toLocaleDateString(\"en-US\", {dateStyle: 'medium', timeStyle: 'medium'}),\n  },\n  {\n    user: 'Troll',\n    id: null,\n    rating: 1,\n    rated: [],\n    publishedRating: 1,\n    review: \"I didn’t use this product correctly and I HATE IT.\",\n    hidden: false,\n    feedback: {up: 10, down: 155},\n    date: new Date(2019, 6, 23, 18, 12, 13).toLocaleDateString(\"en-US\", {dateStyle: 'medium', timeStyle: 'medium'}),\n  },\n].sort((a, b) => b.feedback.up - a.feedback.up);\n\ninitReviews.forEach(review => {\n  review.id = transformId(review.user);\n});\n\nconst maxRating = 4;\n\nconst freshState = {\n  qty: parseInt(currentProduct.qty),\n  opt: currentProduct.opt,\n  sort: 'helpful',\n  stars: 0,\n  rated: [],\n  loggedIn: null,\n  openLogin: false,\n  openSignup: false,\n  user: null,\n  userId: null,\n  rating: null,\n  publishedRating: null,\n  reviewBody: '',\n  reviewSubmitted: false,\n  edit: false,\n  itemsInCart: [],\n  cartClosed: true,\n};\n\nclass Modal extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.buttonFocus = React.createRef();\n    this.container = React.createRef();\n    this.keydownCallback = (e) => {\n      if (e.key === 'Escape') {\n        this.props.handleModal({act: 'close'});\n      };\n    };\n    this.clickCallback = (e) => {\n      if (e.target === this.container.current) {\n        this.props.handleModal({act: 'close'});\n      };\n    };\n  };\n\n  componentDidUpdate() {\n    if (this.props.show) {\n      const modalButton = this.buttonFocus.current;\n      //focus button\n      modalButton.focus();\n      //prevent body scroll\n      document.body.style.overflow = 'hidden';\n      //add listeners for closing with escape and click\n      document.addEventListener('keydown', this.keydownCallback);\n      document.addEventListener('click', this.clickCallback);\n    } else if (document.body.style.overflow === 'hidden') {\n      document.body.style.overflow = 'unset';\n      document.removeEventListener('keydown', this.keydownCallback);\n      document.removeEventListener('click', this.clickCallback);\n    };\n  };\n\n  render() {\n    const showButton = this.props.btn && typeof this.props.btn.rmv === 'number' ?\n    [\n      <button type=\"button\" key=\"confirm-remove\" ref={this.buttonFocus} onClick={() => this.props.handleModal({act: 'close', rmv: this.props.btn.rmv})}>Remove</button>,\n      <button type=\"button\" key=\"cancel-remove\" onClick={() => this.props.handleModal({act: 'close'})}>Cancel</button>,\n    ] :\n    <button type=\"button\" onClick={() => this.props.handleModal({act: 'close'})} ref={this.buttonFocus}>Close</button>\n    if (!this.props.show) {\n      return null;\n    } else {\n      return (\n        <div id=\"modal\" className=\"modal\" ref={this.container}>\n          <aside id=\"modal-window\" className=\"modal-window\" role=\"dialog\" aria-labelledby=\"modal-message\">\n            {this.props.img?\n              <img src={this.props.img} alt=\"main thumb in modal\" className=\"modal-images\" /> :\n              <p id=\"modal-message\">{this.props.msg ? this.props.msg : ''}</p>\n            }\n            {showButton}\n          </aside>\n        </div>\n      );\n    };\n  };\n};\n\nclass App extends React.Component {\n  constructor (props) {\n    super(props);\n    this.state = {\n      modal: false,\n      modalImg: null,\n      modalMsg: null,\n      modalBtn: null,\n      prevEle: null,\n      navOpen: false,\n      qty: parseInt(currentProduct.qty),\n      opt: currentProduct.opt,\n      reviews: deepCopy(initReviews),\n      sort: 'helpful',\n      stars: 0,\n      rated: [],\n      loggedIn: null,\n      openLogin: false,\n      openSignup: false,\n      user: null,\n      userId: null,\n      rating: null,\n      publishedRating: null,\n      reviewBody: '',\n      reviewSubmitted: false,\n      edit: false,\n      itemsInCart: deepCopy(initInCart),\n      cartClosed: true,\n    };\n\n    this.prodName = currentProduct.prodName;\n    this.prodId = currentProduct.prodId;\n    this.price = currentProduct.price;\n    this.subthumbs = [...currentProduct.thumb];\n\n    this.checkIfInCart = this.checkIfInCart.bind(this);\n    this.checkFeedback = this.checkFeedback.bind(this);\n\n    this.handleModal = this.handleModal.bind(this);\n\n    this.toggleMenu = this.toggleMenu.bind(this);\n    this.editReview = this.editReview.bind(this);\n\n    this.handleInput = this.handleInput.bind(this);\n    this.handleFocus = this.handleFocus.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.preventEnter = this.preventEnter.bind(this);\n    this.handleButton = this.handleButton.bind(this);\n    this.handleUsername = this.handleUsername.bind(this);\n    this.handleText = this.handleText.bind(this);\n    this.handleLogin = this.handleLogin.bind(this);\n    this.handleFilterReviews = this.handleFilterReviews.bind(this);\n  };\n\n  handleModal(params, e) {\n    //set passed in element\n    if (e) {\n      params.prev = e.target;\n    };\n    if (params.act === 'close') {\n      //focus previously focused element\n      if (this.state.prevEle) {\n        this.state.prevEle.focus();\n      };\n      //remove item from cart, with rmv being index of item in cart\n      if (typeof params.rmv === 'number') {\n        this.setState({itemsInCart: deepCopy(this.state.itemsInCart).filter((item, i) => i !== params.rmv)});\n      };\n      this.setState({\n        modal: false,\n        modalImg: false,\n        modalMsg: null,\n        modalBtn: null,\n        prevEle: null,\n      });\n    } else {\n      this.setState({\n        modal: true,\n        modalImg: params.img ? params.img : null,\n        modalMsg: params.msg ? params.msg : null,\n        modalBtn: params.btn ? params.btn : null,\n        prevEle: params.prev ? params.prev : null,\n      });\n    };\n  };\n\n  //accepts index as ind, type of input, and event as e\n  handleInput(params, e) {\n    if (params === 'ratings') {\n      const starFilter = parseInt(e.target.value);\n      //filter out all reviews that are not of that star rating\n      this.setState({\n        stars: starFilter,\n        reviews: starFilter < 1 ?\n          this.state.reviews.map(review => {\n            if (review.hidden) {\n              review.hidden = false;\n            };\n            return review;\n          }) :\n          this.state.reviews.map(review => {\n            review.rating === starFilter ? review.hidden = false : review.hidden = true;\n            return review;\n          }),\n      });\n    } else {\n      this.handleOptions(params, e);\n    };\n  };\n\n    handleOptions(params, e) {\n      //set e based on input type\n      let val = typeof e !== 'number' ? e.target.value : e;\n      if (typeof e === 'number') {\n        if (params.add) {\n          val++;\n        } else {\n          val--;\n        };\n      };\n      if (params.type === 'qty') {\n        //max out qty at max qty\n        if (val > maxQty) {\n          val = maxQty;\n          // alert(`Sorry, you can't have more than ${maxQty} of an item`);\n          this.handleModal({msg: `Sorry, you can't have more than ${maxQty} of an item`, prev: e.target});\n        } else if (val - 1 === -1) {\n          //make sure input doesn't go lower than 1\n          val = 1;\n        }\n      };\n      if (params.ind > -1) {\n        //make a copy of the itemsInCart state array\n        const itemArray = deepCopy(this.state.itemsInCart);\n        //set object at array index's key to whatever was selected\n        if (params.type === 'qty') {\n          itemArray[params.ind].qty = parseInt(val);\n          //update state with new array\n          this.setState({itemsInCart: itemArray});\n        } else if (params.type === 'opt') {\n          //set option\n          itemArray[params.ind].opt = val;\n          //splice item out of cart to compare for dupes\n          const arrayToCheck = deepCopy(itemArray);\n          const itemToCheck = arrayToCheck.splice(params.ind, 1);\n          const checkedCart = this.checkIfInCart(itemToCheck[0], arrayToCheck, 'opt');\n          //if there's a dupe, run addItem with spliced item\n          if (checkedCart.hasDupe) {\n            this.setState({itemsInCart: this.addItem(itemToCheck[0], checkedCart.cart)});\n          } else {\n            //else set cart state with spliced element intact\n            this.setState({itemsInCart: itemArray});\n          }\n        };\n        } else {\n          //reset quantity on option change\n          if (params.type === \"opt\" && val !== this.state.opt) {\n            this.setState({qty: 1});\n          };\n          this.setState({[params.type]: val});\n        };\n    };\n\n  handleFocus(e) {\n    e.target.select();\n  };\n\n  preventEnter(e) {\n    if (e.which === 13) {\n      e.preventDefault();\n    };\n  };\n\n  handleSubmit(ind, type, e) {\n    e.preventDefault();\n\n    //remove from cart\n    if (type === 'cart' && ind > -1) {\n      this.handleModal({msg: 'Are you sure you want to delete this item?', btn: {rmv: ind}});\n    } else if (type === 'cart') {\n      //add to cart\n      const itemToAdd = {\n        prodName: this.prodName,\n        prodId: this.prodId,\n        thumb: this.subthumbs,\n        opt: this.state.opt,\n        qty: this.state.qty,\n        price: this.price,\n      };\n      this.setState({itemsInCart: this.addItem(itemToAdd), qty: freshState.qty, opt: freshState.opt});\n    };\n\n    //sign in/out\n    if (type === 'login') {\n      //make sure user exists\n      if (this.state.reviews.some(review => review.id === this.state.userId)) {\n        //get user review\n        const userReview = this.state.reviews.filter(review => review.id === this.state.userId)[0];\n        this.setState({\n          loggedIn: true,\n          openLogin: false,\n          rating: userReview.rating,\n          publishedRating: userReview.publishedRating,\n          reviewBody: userReview.review ? userReview.review : \"\",\n          reviewSubmitted: userReview.review ? true : false,\n          rated: userReview.rated,\n        });\n        //check for cart\n        userReview.cart ?\n          this.combineCarts(userReview.cart) :\n          this.setState({itemsInCart: this.state.itemsInCart.length > 0 ? deepCopy(this.state.itemsInCart) : []});\n        //resort reviews with user's review at bottom, if applicable\n        this.handleFilterReviews(this.state.sort);\n      } else {\n        // alert(`There's no user named ${this.state.user}. Trying signing up instead.`);\n        this.handleModal({msg: `There's no user named ${this.state.user}. Trying signing up instead.`, prev: document.querySelector('form input')})\n        this.setState({openLogin: false, openSignup: true});\n      };\n    } else if (type === 'signup') {\n      // create review entry for user, if not already\n      if (!this.state.reviews.some(review => review.id === this.state.userId)) {\n        const userToAdd = {\n          user: this.state.user,\n          id: this.state.userId,\n          rating: this.state.rating,\n          rated: this.state.rated,\n        };\n        this.setState({\n          reviews: deepCopy(this.state.reviews).concat(userToAdd),\n          loggedIn: true,\n          openSignup: false,\n        });\n      } else {\n        // alert(`The user ${this.state.user} already exists. Try signing in instead.`);\n        this.handleModal({msg: `The user ${this.state.user} already exists. Try signing in instead.`, prev: document.querySelector('form input')});\n        this.setState({openSignup: false, openLogin: true});\n      };\n    } else if (type === 'logout') {\n      //empty cart and reset states on logout\n      if (this.state.loggedIn) {\n        //retain cart in review\n        const userCart = this.state.itemsInCart.length > 0 ? deepCopy(this.state.itemsInCart) : [];\n        const reviewFeedback = this.state.rated.length > 0 ? deepCopy(this.state.rated) : [];\n        const userReviews = this.state.reviews.map(review => {\n          if (review.id === this.state.userId) {\n            review.cart = userCart;\n            review.rated = reviewFeedback;\n          };\n          if (review.hidden) {\n            review.hidden = false;\n          };\n          return review;\n        });\n        this.handleFilterReviews(this.state.sort, userReviews);\n        //reset other states\n        this.setState(freshState);\n      };\n    };\n\n    //leave review\n    if (type === 'write' && this.state.rating) {\n      //copy reviews array\n      const reviewArray = deepCopy(this.state.reviews).map(item => {\n        //map to find array with userId, and add review properties\n        if (item.id === this.state.userId) {\n          item.rating = this.state.rating;\n          item.review = this.state.reviewBody;\n          item.hidden = false;\n          item.feedback = {up: 0, down: 0};\n          item.publishedRating = this.state.rating;\n          item.date = new Date().toLocaleDateString(\"en-US\", {dateStyle: 'medium', timeStyle: 'medium'});\n        } else if (this.state.edit && item.rated) {\n          //remove user from rated array in other reviews on edit\n          item.rated.forEach((obj, i) => {\n            if (obj[this.state.userId]) {\n              item.rated.splice(i, 1);\n            };\n          });\n        };\n        return item;\n      });\n      //set review\n      this.setState({reviews: reviewArray, reviewSubmitted: true, publishedRating: this.state.rating});\n      if (this.state.edit) {\n        this.editReview();\n      };\n        //modal thank you message\n        this.handleModal({msg: 'Thanks for your feedback!'});\n    } else if (type === 'write') {\n      // alert('Sorry, you must leave a rating first.');\n      this.handleModal({msg: 'Sorry, you must leave a rating first.', prev: e.target.querySelector('.empty-4-star')});\n    };\n  };\n\n    checkIfInCart(itemToCheck, currentCart, type) {\n      //map items, return index of matching items, and filter out -1\n      const duplicateItems = currentCart.map((item, i) => {\n        if (item.prodId === itemToCheck.prodId && item[type] === itemToCheck[type]) {\n          return i;\n        } else {\n          return -1;\n        };\n      }).filter(i => i > -1);\n      //return dupe\n      if (duplicateItems.length > 0) {\n        return {\n          hasDupe: true,\n          dupe: currentCart[duplicateItems[0]],\n          dupeIndex: duplicateItems[0],\n          cart: currentCart,\n        };\n      } else {\n        return {\n          hasDupe: false,\n          cart: currentCart,\n        };\n      };\n    };\n\n    addItem(itemToAdd, customCart, loop) {\n      const checkedCart = this.checkIfInCart(itemToAdd, customCart ? customCart : deepCopy(this.state.itemsInCart), 'opt');\n      //consolidate duplicate items\n      if (checkedCart.hasDupe) {\n        const totalQty = parseInt(checkedCart.dupe.qty) + parseInt(itemToAdd.qty);\n        if (totalQty <= maxQty) {\n          //increase item in cart qty by item qty from product page, if not exceeding max qty\n          checkedCart.cart[checkedCart.dupeIndex].qty = totalQty;\n        } else {\n          //max out at max qty\n          if (!loop) {\n            //only alert if not being used in a loop\n            // alert(`The max amount of ${itemToAdd.prodName} - ${itemToAdd.opt} allowed is ${maxQty}`);\n            this.handleModal({msg: `The max amount of ${itemToAdd.prodName} - ${itemToAdd.opt} allowed is ${maxQty}`, prev: document.querySelector('#nav-cart button')});\n          };\n          checkedCart.cart[checkedCart.dupeIndex].qty = maxQty;\n        };\n        return checkedCart.cart;\n      } else {\n        //add to entry if unique\n        return checkedCart.cart.concat(itemToAdd);\n      };\n    };\n\n    combineCarts(userCart) {\n      //if current state cart and user cart have items, consolidate them\n      if (this.state.itemsInCart.length > 0) {\n        let combinedCart = deepCopy(this.state.itemsInCart);\n        //map through user's previous cart and use add item function with state cart\n        userCart.forEach(item => {\n          combinedCart = this.addItem(item, combinedCart, true);\n        });\n        this.setState({itemsInCart: combinedCart});\n        // alert('Your previously saved items have been combined with your current cart.');\n        this.handleModal({msg: 'Your previously saved items have been combined with your current cart.', prev: document.querySelector('#nav-cart button')});\n      } else {\n        this.setState({itemsInCart: userCart});\n      };\n    };\n\n  toggleMenu(type) {\n    type === 'cart' ? this.setState({cartClosed: !this.state.cartClosed}) : this.setState({navOpen: !this.state.navOpen});\n  };\n\n  handleUsername(e) {\n    // const formattedUser = e.target.value.split('').filter(i => i.match(/\\S/g)).join('');\n    //erase if has invalid characters\n    if (!transformId(e.target.value)) {\n      this.handleModal({msg: `Your username contains one or more invalid characters. Try again, making sure to avoid: -!$%^&*()_+|~=\\`{}[]:\";'<>?,./`, prev: e.target});\n      e.target.value = '';\n    };\n    this.setState({user: e.target.value, userId: transformId(e.target.value)});\n  };\n\n  handleButton(type, e) {\n    //checkout alert\n    if(type === 'checkout' && this.state.itemsInCart && this.state.itemsInCart.length > 0) {\n      this.handleModal({msg: `Thanks for your hypothetical purchase! Since this is just a demo, your cart will be reset.`, prev: document.querySelector('#nav-cart button')});\n      this.setState({itemsInCart: []});\n    } else if (type === 'checkout') {\n      //shouldn't ever happen\n      this.handleModal({msg: `Sorry, there aren't any items in your cart.`});\n    };\n\n    if (type === 'star' && this.state.loggedIn) {\n      const val = e.currentTarget.value\n      //update rating for logged in user in review array\n      const reviewsArr = this.state.reviews.map(item => {\n        if (item.id === this.state.userId) {\n          item.rating = parseInt(val);\n        };\n        return item;\n      });\n      this.setState({rating: parseInt(val), reviews: reviewsArr});\n    } else if (type === 'star') {\n      // alert('You must be logged in to rate this product.');\n      this.handleModal({msg: 'You must be logged in to rate this product.', prev: document.querySelector('form button')});\n    };\n\n    if (type === 'thumb') {\n      const val = e.currentTarget.value;\n      this.setState({opt: itemOptions.map(item => item.id)[val]});\n    };\n\n    if (type.type === 'feedback') {\n      const val = e.currentTarget.value;\n      const userToRate = type.user;\n      //make sure user is signed in to rate a review\n      if (this.state.loggedIn) {\n        //user cannot rate their own review\n        if (this.state.userId === userToRate) {\n          // alert('You cannot rate your own review');\n          this.handleModal({msg: 'You cannot rate your own review'});\n        } else {\n          //only change if val is opposite or not currently set\n          const shouldUpdate =\n            this.state.rated.length < 1 ?\n              true :\n            this.state.rated.filter(user => user[userToRate]).length < 1 ?\n              true :\n            this.state.rated.filter(user => user[userToRate])[0][userToRate] !== val ?\n              true : false;\n          if (shouldUpdate) {\n            const updatedReview = deepCopy(this.state.reviews).map(review => {\n              if (review.id === userToRate) {\n                if (val === 'up') {\n                  review.feedback.up++;\n                  //only decrease opposite if previously rated by the same user\n                  if (this.state.rated.some(item => item[userToRate])) {\n                    review.feedback.down > 0 ? review.feedback.down-- : review.feedback.down = 0;\n                  };\n                } else if (val === 'down') {\n                  review.feedback.down++;\n                  if (this.state.rated.some(item => item[userToRate])) {\n                    review.feedback.up > 0 ? review.feedback.up-- : review.feedback.up = 0;\n                  };\n                };\n              };\n              return review;\n            });\n            this.setState({reviews: updatedReview});\n          };\n\n          //keep track of which reviewers the current user has rated\n          const updateRated = deepCopy(this.state.rated);\n          const shouldAdd = !updateRated.some(item => item[userToRate]);\n          const updatedArray = shouldAdd ? updateRated.concat({[userToRate]: val}) : updateRated.map(item => {\n            if (item[userToRate]) {\n              item[userToRate] = val;\n            };\n            return item;\n          });\n          this.setState({rated: updatedArray});\n        };\n      } else {\n        // alert('You must be logged in to rate a review');\n        this.handleModal({msg: 'You must be logged in to rate a review', prev: document.querySelector('form button')});\n      }\n    };\n\n    if (type === 'cancel') {\n      this.editReview();\n      //revert review body\n      const submittedReview = deepCopy(this.state.reviews).filter(review => review.id === this.state.userId)[0].review;\n      if (submittedReview !== this.state.reviewBody) {\n        this.setState({reviewBody: submittedReview});\n      };\n    };\n  };\n\n    checkFeedback(reviewer) {\n      //if current user's rated array contains the reviewer, return that thumb rating\n      return this.state.rated.some(user => user[reviewer]) ? this.state.rated.filter(user => user[reviewer])[0][reviewer] : false;\n    };\n\n    editReview() {\n      const toggle = !this.state.edit;\n      this.setState({edit: toggle});\n    };\n\n    handleFilterReviews(e, custom) {\n      const reviewsToFilter = custom ? custom : deepCopy(this.state.reviews);\n      const sortOption = typeof e === 'string' ? e : e.target.value;\n      const currentUser = custom ? false : this.state.userId;\n      if (sortOption === 'helpful') {\n        this.setState({sort: 'helpful', reviews: reviewsToFilter.map(review => {\n          if (review.publishedRating) {\n            //include if published\n            return review;\n          } else {\n            //hide if not\n            review.hidden = true;\n            return review;\n          }\n        }).sort((a, b) =>\n          //sort current user to end, and ignore hidden users\n          (((a.id === currentUser) !== (b.id === currentUser)) || a.hidden || b.hidden) ?\n            (a.id === currentUser || a.hidden ? 1 : -1) : b.feedback.up - a.feedback.up\n          )});\n      } else if (sortOption === 'recent') {\n        this.setState({sort: 'recent', reviews: reviewsToFilter.map(review => {\n          if (review.publishedRating) {\n            return review;\n          } else {\n            review.hidden = true;\n            return review;\n          }\n        }).sort((a, b) =>\n          (((a.id === currentUser) !== (b.id === currentUser)) || a.hidden || b.hidden) ?\n            (a.id === currentUser || a.hidden ? 1 : -1) : Date.parse(b.date) - Date.parse(a.date)\n          )});\n      } else if (sortOption === 'old') {\n        this.setState({sort: 'old', reviews: reviewsToFilter.map(review => {\n          if (review.publishedRating) {\n            return review;\n          } else {\n            review.hidden = true;\n            return review;\n          }\n        }).sort((a, b) =>\n          (((a.id === currentUser) !== (b.id === currentUser)) || a.hidden || b.hidden) ?\n          (a.id === currentUser || a.hidden ? 1 : -1) : Date.parse(a.date) - Date.parse(b.date)\n          )});\n      };\n      // } else if (sortOption === 'controversial') {\n      //   this.setState({sort: 'controversial', hiddenReviews: reviewsToFilter.filter(review => review.publishedRating).sort((a, b) =>\n      //     ((a.id === currentUser) !== (b.id === currentUser)) ? (a.id === currentUser ? 1 : -1) : b.feedback.down - a.feedback.down\n      //     )});\n      // };\n    };\n\n  handleText(e) {\n    const text = e.target.value;\n    this.setState({reviewBody: text});\n  };\n\n  handleLogin(e) {\n    if (e.target.value === 'login') {\n      this.setState({openLogin: true, openSignup: false}, () => document.querySelector('#login-form input').focus());\n    } else {\n      this.setState({openSignup: true, openLogin: false});\n    };\n  };\n\n  render () {\n    let itemCount;\n    if(this.state.itemsInCart.length > 0) {\n      //number of items in cart based on quantity present\n      this.state.itemsInCart.forEach(item => {\n        //increment if itemCount is set\n        if (itemCount) {\n          itemCount += parseInt(item.qty);\n        } else {\n          //set\n          itemCount = parseInt(item.qty);\n        };\n      });\n    } else {\n      itemCount = 0;\n    };\n\n    return (\n      <>\n        <Modal\n          show={this.state.modal}\n          img={this.state.modalImg}\n          msg={this.state.modalMsg}\n          btn={this.state.modalBtn}\n          prev={this.state.prevEle}\n          handleModal={this.handleModal}\n        />\n        <Header\n          modal={this.state.modal}\n          handleModal={this.handleModal}\n          navOpen={this.state.navOpen}\n          itemsInCart={this.state.itemsInCart}\n          itemCount={itemCount}\n          cartClosed={this.state.cartClosed}\n          handleInput={this.handleInput}\n          handleFocus={this.handleFocus}\n          handleSubmit={this.handleSubmit}\n          preventEnter={this.preventEnter}\n          toggleMenu={this.toggleMenu}\n          user={this.state.user}\n          loggedIn={this.state.loggedIn}\n          openLogin={this.state.openLogin}\n          openSignup={this.state.openSignup}\n          handleUsername={this.handleUsername}\n          handleLogin={this.handleLogin}\n          handleButton={this.handleButton}\n        />\n        <Main\n          modal={this.state.modal}\n          handleModal={this.handleModal}\n          user={this.state.user ? this.state.user : 'Your Name'}\n          userId={this.state.userId ? this.state.userId : 'your-name'}\n          loggedIn={this.state.loggedIn}\n          rating={this.state.rating}\n          itemsInCart={this.state.itemsInCart}\n          prodName={this.prodName}\n          prodId={this.prodId}\n          thumb={this.subthumbs[this.state.opt ? itemOptions.map(opt => opt.id).indexOf(this.state.opt) : 0]}\n          subthumbs={this.subthumbs}\n          qty={this.state.qty}\n          opt={this.state.opt}\n          price={this.price}\n          reviews={this.state.reviews}\n          sort={this.state.sort}\n          stars={this.state.stars}\n          checkFeedback={this.checkFeedback}\n          reviewBody={this.state.reviewBody}\n          publishedRating={this.state.publishedRating}\n          reviewSubmitted={this.state.reviewSubmitted}\n          editReview={this.editReview}\n          editOpen={this.state.edit}\n          checkIfInCart={this.checkIfInCart}\n          handleInput={this.handleInput}\n          handleFocus={this.handleFocus}\n          handleSubmit={this.handleSubmit}\n          handleButton={this.handleButton}\n          handleUsername={this.handleUsername}\n          handleText={this.handleText}\n          handleFilterReviews={this.handleFilterReviews}\n        />\n        <Footer modal={this.state.modal} />\n      </>\n    );\n  };\n};\n\n  //====================\n  //Header\n  //====================\n\n  function Header(props) {\n      return (\n        <header>\n          <Navbar\n            modal={props.modal}\n            handleModal={props.handleModal}\n            navOpen={props.navOpen}\n            cartClosed={props.cartClosed}\n            itemCount={props.itemCount}\n            itemsInCart={props.itemsInCart}\n            toggleMenu={props.toggleMenu}\n            loggedIn={props.loggedIn}\n            openLogin={props.openLogin}\n            openSignup={props.openSignup}\n            user={props.user}\n            preventEnter={props.preventEnter}\n            handleInput={props.handleInput}\n            handleButton={props.handleButton}\n            handleFocus={props.handleFocus}\n            handleSubmit={props.handleSubmit}\n            handleUsername={props.handleUsername}\n            handleLogin={props.handleLogin}\n          />\n          {/* {!props.cartClosed ?\n            <Cart\n              modal={props.modal}\n              itemsInCart={props.itemsInCart}\n              handleInput={props.handleInput}\n              handleFocus={props.handleFocus}\n              handleSubmit={props.handleSubmit}\n              handleButton={props.handleButton}\n              preventEnter={props.preventEnter}\n              toggleMenu={props.toggleMenu}\n            /> :\n            ''\n          } */}\n        </header>\n      );\n  };\n\n    function Navbar(props) {\n      return (\n        <nav id=\"navbar\">\n          <ul id=\"nav-link-container\">\n            <li id=\"nav-home\" className=\"links\">\n              <button type=\"button\" tabIndex={props.modal ? -1 : null}>Home</button>\n            </li>\n            <li id=\"nav-categories\" className={props.navOpen ? 'active links' : 'links'}>\n              <button type=\"button\" tabIndex={props.modal ? -1 : null} onClick={() => props.toggleMenu('nav')}>\n                Categories\n              </button>\n              {props.navOpen ? <NavLinks modal={props.modal} handleModal={props.handleModal} /> : ''}\n            </li>\n            <LogIn\n              modal={props.modal}\n              loggedIn={props.loggedIn}\n              openLogin={props.openLogin}\n              openSignup={props.openSignup}\n              user={props.user}\n              handleSubmit={props.handleSubmit}\n              handleUsername={props.handleUsername}\n              handleLogin={props.handleLogin}\n            />\n            <NavCart\n              modal={props.modal}\n              itemCount={props.itemCount}\n              toggleMenu={props.toggleMenu}\n              handleButton={props.handleButton}\n            />\n          </ul>\n          {!props.cartClosed ?\n            <Cart\n              modal={props.modal}\n              itemsInCart={props.itemsInCart}\n              handleInput={props.handleInput}\n              handleFocus={props.handleFocus}\n              handleSubmit={props.handleSubmit}\n              handleButton={props.handleButton}\n              preventEnter={props.preventEnter}\n              toggleMenu={props.toggleMenu}\n            /> :\n            ''\n          }\n        </nav>\n      );\n    };\n\n      function NavLinks(props) {\n        return (\n          <ol id=\"categories-links\" className=\"nav-links\">\n            <li><button type=\"button\" tabIndex={props.modal ? -1 : null} onClick={(e) => props.handleModal({msg: 'This link will go to a designated page, or some other action you decide on.'}, e)}>Cat. 1</button></li>\n            <li><button type=\"button\" tabIndex={props.modal ? -1 : null} onClick={(e) => props.handleModal({msg: 'This link will go to a designated page, or some other action you decide on.'}, e)}>Cat. 2</button></li>\n            <li><button type=\"button\" tabIndex={props.modal ? -1 : null} onClick={(e) => props.handleModal({msg: 'This link will go to a designated page, or some other action you decide on.'}, e)}>Cat. 3</button></li>\n            <li><button type=\"button\" tabIndex={props.modal ? -1 : null} onClick={(e) => props.handleModal({msg: 'This link will go to a designated page, or some other action you decide on.'}, e)}>Cat. 4</button></li>\n          </ol>\n        );\n      };\n\n      function LogIn(props) {\n        return (\n          <li id=\"nav-login\" className=\"login\">\n            {props.loggedIn ? (\n              <form id=\"welcome-form\" onSubmit={(e) => props.handleSubmit(null, 'logout', e)}>\n                <label htmlFor=\"welcome-form\">Hi, {props.user}!</label>\n                <button type=\"submit\" name=\"signout\" value=\"signout\" tabIndex={props.modal ? -1 : null}>Sign Out</button>\n              </form>\n            ) : props.openLogin ? (\n              <form id=\"login-form\" onSubmit={(e) => props.handleSubmit(null, 'login', e)}>\n                <label htmlFor=\"login-input\">You are not signed in.</label>\n                <input type='text' id=\"login-input\" name=\"login-input\" placeholder=\"enter a name to test\" onChange={(e) => props.handleUsername(e)} required tabIndex={props.modal ? -1 : null}/>\n                <button type=\"submit\" name=\"login\" value=\"login\" tabIndex={props.modal ? -1 : null}>Log In</button>\n                <button type=\"button\" name=\"signup\" value=\"signup\" onClick={(e) => props.handleLogin(e)} tabIndex={props.modal ? -1 : null}>Need an account? Sign Up</button>\n              </form>\n            ) : props.openSignup ? (\n              <form id=\"sign-up-form\" onSubmit={(e) => props.handleSubmit(null, 'signup', e)}>\n                <label htmlFor=\"login-input\">You are not signed in.</label>\n                <input type='text' id=\"login-input\" name=\"login-input\" placeholder=\"enter a name to test\" onChange={(e) => props.handleUsername(e)} required tabIndex={props.modal ? -1 : null}/>\n                <button type=\"submit\" name=\"signup\" value=\"signup\" tabIndex={props.modal ? -1 : null}>Sign Up</button>\n                <button type=\"button\" name=\"login\" value=\"login\" onClick={(e) => props.handleLogin(e)} tabIndex={props.modal ? -1 : null}>Already have an account? Log In</button>\n              </form>\n            ) : (\n              <form id=\"sign-in-form\">\n                <label htmlFor=\"login-input\">You are not signed in.</label>\n                <button type=\"button\" name=\"login\" value=\"login\" onClick={(e) => props.handleLogin(e)} tabIndex={props.modal ? -1 : null}>Log In</button>\n                <button type=\"button\" name=\"signup\" value=\"signup\" onClick={(e) => props.handleLogin(e)} tabIndex={props.modal ? -1 : null}>Sign Up</button>\n              </form>\n            )}\n          </li>\n        );\n      };\n\n      function NavCart(props) {\n        return (\n          <li id=\"nav-cart\" className=\"links\">\n            <button type=\"button\" onClick={() => props.toggleMenu('cart')} aria-label=\"open cart\" tabIndex={props.modal ? -1 : null}>\n              <span id=\"cart-button-span\">\n                <CartIcon fillColor={props.itemCount > 0 ? colorYellow : colorWhite} />\n                <span className={props.itemCount > 0 ? 'active' : null}>Cart ({props.itemCount.toString()})</span>\n              </span>\n            </button>\n          </li>\n        );\n      };\n\n      function Cart(props) {\n        return (\n          <aside id=\"cart\">\n            {props.itemsInCart.length > 0 ?\n              <>\n              <InCart\n                modal={props.modal}\n                itemsInCart={props.itemsInCart}\n                handleInput={props.handleInput}\n                handleFocus={props.handleFocus}\n                handleSubmit={props.handleSubmit}\n                preventEnter={props.preventEnter}\n              />\n              <Total itemsInCart={props.itemsInCart} />\n              <Checkout modal={props.modal} handleButton={props.handleButton}/>\n              </>\n              :\n              <span id=\"empty-cart\">Cart is Empty</span>\n            }\n            <CloseCart modal={props.modal} toggleMenu={props.toggleMenu} />\n          </aside>\n        );\n      };\n\n        function InCart(props) {\n          const items = props.itemsInCart;\n          const opts = itemOptions.map(opt => opt.id);\n          const listItems =\n            items.map((item, ind) =>\n                <CartProduct\n                  key={`cart-item-${ind + 1}`}\n                  modal={props.modal}\n                  index={ind}\n                  itemsInCart={props.itemsInCart}\n                  prodName={item.prodName}\n                  id={`${item.prodId}-${item.opt}`}\n                  prodId={item.prodId}\n                  thumb={item.thumb[opts.indexOf(item.opt)]}\n                  qty={item.qty}\n                  opt={item.opt}\n                  price={item.price}\n                  handleInput={props.handleInput}\n                  handleFocus={props.handleFocus}\n                  handleSubmit={props.handleSubmit}\n                  preventEnter={props.preventEnter}\n                />\n            );\n          return (\n            <ol id=\"products-in-cart\">\n              {listItems}\n            </ol>\n          );\n        };\n\n          function CartProduct(props) {\n            //product id with option\n            return (\n              <li className=\"cart-products\">\n                <img src={props.thumb} alt={`${props.prodName} thumbnail`} id={`${props.id}-thumbnail`} className=\"thumbnails\" />\n                <h3 id={`${props.id}-title`} className=\"titles\">{props.prodName}</h3>\n                <ProductForm\n                  modal={props.modal}\n                  cart={true}\n                  index={props.index}\n                  itemsInCart={props.itemsInCart}\n                  id={props.id}\n                  prodId={props.prodId}\n                  qty={props.qty}\n                  opt={props.opt}\n                  price={props.price}\n                  handleInput={props.handleInput}\n                  handleFocus={props.handleFocus}\n                  handleSubmit={props.handleSubmit}\n                  preventEnter={props.preventEnter}\n                />\n              </li>\n            );\n          };\n\n            function ProductForm(props) {\n              return (\n                <form\n                  id={`${props.id}-form`}\n                  className=\"forms\"\n                  onSubmit={(e) => props.handleSubmit(props.index, 'cart', e)}\n                  onKeyPress={props.cart ? (e) => props.preventEnter(e) : null}\n                >\n                  <Options\n                    modal={props.modal}\n                    cart={props.cart}\n                    index={props.cart ? props.index : -1}\n                    id={props.id}\n                    opt={props.opt}\n                    handleInput={props.handleInput}\n                  />\n                  <Quantity\n                    modal={props.modal}\n                    index={props.cart ? props.index : -1}\n                    id={props.id}\n                    opt={props.opt}\n                    qty={props.qty}\n                    price={props.price}\n                    handleInput={props.handleInput}\n                    handleFocus={props.handleFocus}\n                    preventEnter={props.preventEnter}\n                  />\n                  {props.cart ?\n                    <RemoveItem\n                      modal={props.modal}\n                      id={props.id}\n                      index={props.index}\n                      handleSubmit={props.handleSubmit}\n                    /> :\n                    <AddToCart\n                      modal={props.modal}\n                      prodId={props.prodId}\n                      id={props.id}\n                      itemsInCart={props.itemsInCart}\n                      qty={props.qty}\n                      opt={props.opt}\n                      checkIfInCart={props.checkIfInCart}\n                    />\n                  }\n                </form>\n              );\n            };\n\n            function Quantity(props) {\n              return (\n                //conditionals if quantity is in cart or not\n                <div id={`${props.id}-quantity-container`} className=\"quantities\">\n                  {props.index > -1 ? ( //in cart\n                    <>\n                      <label htmlFor={`${props.id}-quantity`} aria-label=\"item quantity\">\n                        {`$${props.price.toFixed(2)} x `}\n                      </label>\n                      <input\n                        type=\"number\"\n                        id={`${props.id}-quantity`}\n                        name={`${props.id}-quantity`}\n                        value={props.qty}\n                        min=\"1\"\n                        max={maxQty}\n                        onChange={(e) => props.handleInput({ind: props.index, type: 'qty'}, e)}\n                        onFocus={(e) => props.handleFocus(e)}\n                        tabIndex={props.modal ? -1 : null}\n                        required\n                      />\n                      <strong aria-label=\"price\" className=\"prices\">{` = $${(props.qty * props.price * 100 / 100).toFixed(2)}`}</strong>\n                    </>\n                  ) : ( //in info\n                    <>\n                      <label htmlFor={`${props.id}-quantity`} aria-label=\"item quantity\">\n                        Qty.{' '}\n                      </label>\n                      <button\n                        type=\"button\"\n                        className=\"icons quantity-decrease\"\n                        onClick={() => props.handleInput({ind: props.index, type: 'qty', add: false}, parseInt(props.qty))}\n                        disabled={props.qty === 1 ? true : null}\n                        tabIndex={props.modal ? -1 : null}\n                      >\n                        <MinusIcon fillColor={colorDarkGrey} />\n                      </button>\n                      <input\n                        type=\"number\"\n                        id={`${props.id}-quantity`}\n                        name={`${props.id}-quantity`}\n                        value={props.qty}\n                        min=\"1\"\n                        max={maxQty}\n                        onChange={(e) => props.handleInput({ind: props.index, type: 'qty'}, e)}\n                        onFocus={(e) => props.handleFocus(e)}\n                        tabIndex={props.modal ? -1 : null}\n                        required\n                      />\n                      <button\n                        type=\"button\"\n                        className=\"icons quantity-increase\"\n                        onClick={() => props.handleInput({ind: props.index, type: 'qty', add: true}, parseInt(props.qty))}\n                        disabled={props.qty === maxQty ? true : null}\n                        tabIndex={props.modal ? -1 : null}\n                      >\n                        <PlusIcon fillColor={colorDarkGrey} />\n                      </button>\n                    </>\n                  )}\n                </div>\n              );\n            };\n\n            function Options(props) {\n              return (\n                <div id={`${props.id}-options-container`} className=\"options\">\n                  <label htmlFor={`${props.id}-options`}>Options:</label>\n                  <select\n                    id={`${props.id}-options`}\n                    name={`${props.id}-options`}\n                    value={props.opt}\n                    onChange={(e) => props.handleInput({ind: props.index, type: 'opt'}, e)}\n                    tabIndex={props.modal ? -1 : null}\n                    required\n                  >\n                    <option value=\"\" disabled>Choose</option>\n                    {itemOptions.map(opt => <option key={opt.id} value={opt.id}>{opt.name}</option>)}\n                  </select>\n                </div>\n              );\n            };\n\n            function RemoveItem(props) {\n              return (\n                <button\n                  type=\"button\"\n                  id={`remove-${props.id}`}\n                  className=\"remove-items\"\n                  aria-label=\"remove from cart\"\n                  onClick={(e) => props.handleSubmit(props.index, 'cart', e)}\n                  tabIndex={props.modal ? -1 : null}\n                >\n                  Rmv\n                </button>\n              );\n            };\n\n        function Total(props) {\n          const subTotal = props.itemsInCart.map(item => item.qty * item.price * 100 / 100).reduce((x, y) => x + y);\n          const tax = (subTotal * 1000) * (0.0825 * 1000 / 1000) / 1000;\n          const finalTotal = (subTotal * 100 / 100) + (tax * 100 / 100);\n          return (\n            <div id=\"cart-totals-container\" className=\"cart-totals\">\n              <span id=\"cart-subtotal\">Subtotal: ${subTotal.toFixed(2)} </span>\n              <span id=\"cart-tax\">Tax: ${tax.toFixed(2)} </span>\n              <span id=\"cart-final-total\"><strong>Final Total: ${finalTotal.toFixed(2)} </strong></span>\n            </div>\n          );\n        };\n\n        function Checkout(props) {\n          return (\n            <button\n              type=\"button\"\n              id=\"checkout-button\"\n              className=\"icons buttons\"\n              tabIndex={props.modal ? -1 : null}\n              onClick={() => props.handleButton('checkout')}\n            >\n              <span id=\"checkout-button-span\">\n                <span>Proceed to Checkout</span>\n                <CartIcon fillColor={colorRed} />\n              </span>\n            </button>\n          );\n        };\n\n        function CloseCart(props) {\n          return (\n            <button type=\"button\" id=\"close-cart-button\" className=\"icons\" onClick={() => props.toggleMenu('cart')} tabIndex={props.modal ? -1 : null}>\n              <CloseArrowIcon fillColor={colorDarkGrey} />\n            </button>\n          );\n        };\n\n  //====================\n  //Main\n  //====================\n  function Main(props) {\n    //filter reviews array based on those with ratings\n    const ratedReviews = props.reviews.filter(review => review.rating);\n    const avgRating = ratedReviews.reduce((x, y) => x + y.rating, 0) / ratedReviews.length;\n    const avgStars = Math.floor(avgRating * 2) / 2;\n    const wholeStars = Math.floor(avgRating);\n    const halfStar = Math.round(avgRating - wholeStars);\n    const emptyStars = maxRating - (wholeStars + halfStar);\n    return (\n      <main>\n          <ProductInfo\n            modal={props.modal}\n            handleModal={props.handleModal}\n            itemsInCart={props.itemsInCart}\n            prodName={props.prodName}\n            prodId={props.prodId}\n            thumb={props.thumb}\n            subthumbs={props.subthumbs}\n            qty={props.qty}\n            opt={props.opt}\n            price={props.price}\n            reviews={props.reviews}\n            reviewCount={props.reviews.filter(review => review.review).length}\n            rating={props.rating}\n            user={props.user}\n            userId={props.userId}\n            whole={wholeStars}\n            half={halfStar}\n            empty={emptyStars}\n            checkIfInCart={props.checkIfInCart}\n            handleInput={props.handleInput}\n            handleFocus={props.handleFocus}\n            handleSubmit={props.handleSubmit}\n            handleButton={props.handleButton}\n          />\n          <ReviewDisplay\n            modal={props.modal}\n            prodId={props.prodId}\n            reviews={props.reviews}\n            sort={props.sort}\n            stars={props.stars}\n            publishedRating={props.publishedRating}\n            checkFeedback={props.checkFeedback}\n            reviewBody={props.reviewBody}\n            reviewSubmitted={props.reviewSubmitted}\n            editReview={props.editReview}\n            editOpen={props.editOpen}\n            avg={avgStars}\n            rating={props.rating}\n            user={props.user}\n            userId={props.userId}\n            loggedIn={props.loggedIn}\n            whole={wholeStars}\n            half={halfStar}\n            empty={emptyStars}\n            handleSubmit={props.handleSubmit}\n            handleButton={props.handleButton}\n            handleInput={props.handleInput}\n            handleFocus={props.handleFocus}\n            handleUsername={props.handleUsername}\n            handleText={props.handleText}\n            handleFilterReviews={props.handleFilterReviews}\n          />\n      </main>\n    );\n  };\n\n    //=============\n    //Product Info\n    //=============\n      function ProductInfo(props) {\n        return (\n          <section id={`${props.prodId}-info-container`} className=\"product-info\">\n            <h1 id={`${props.prodId}-title`} className=\"titles\">{props.prodName}</h1>\n            <figure id={`${props.prodId}-thumbnails`} className=\"thumbnail-container\">\n              <button\n                type=\"button\"\n                id=\"main-thumbnail\"\n                aria-label=\"enlarge image\"\n                tabIndex={props.modal ? -1 : null}\n                onClick={(e) => props.handleModal({img: props.thumb}, e)}\n              >\n                <img src={props.thumb} alt={`${props.prodName} main preview`} id={`${props.prodId}-main-image`} className=\"main-image\" />\n              </button>\n              <Thumbnails\n                modal={props.modal}\n                prodName={props.prodName}\n                prodId={props.prodId}\n                mainThumb={props.thumb}\n                subthumbs={props.subthumbs}\n                handleButton={props.handleButton}\n              />\n            </figure>\n            <form>\n              {props.rating ? (\n                <Rating\n                  modal={props.modal}\n                  prodId={props.prodId}\n                  user={props.userId}\n                  kind=\"user\"\n                  section=\"info\"\n                  reviewer={false}\n                  rating={props.rating}\n                  handleButton={props.handleButton}\n                />\n              ) : (\n                <Rating\n                  modal={props.modal}\n                  prodId={props.prodId}\n                  kind='avg'\n                  section=\"info\"\n                  whole={props.whole}\n                  half={props.half}\n                  empty={props.empty}\n                  handleButton={props.handleButton}\n                />\n              )}\n            </form>\n            <ReviewsLink modal={props.modal} prodId={props.prodId} reviewCount={props.reviewCount} />\n            <Description prodId={props.prodId} />\n            <Price prodId={props.prodId} price={props.price} />\n            <ProductForm\n              modal={props.modal}\n              itemsInCart={props.itemsInCart}\n              id={`${props.prodId}-product`}\n              prodId={props.prodId}\n              qty={props.qty}\n              opt={props.opt}\n              checkIfInCart={props.checkIfInCart}\n              handleInput={props.handleInput}\n              handleFocus={props.handleFocus}\n              handleSubmit={props.handleSubmit}\n            />\n          </section>\n        );\n      };\n\n        function Thumbnails(props) {\n          const listItems = props.subthumbs.map((thumb, i) => {\n            return (\n              <SubThumbnails\n                key={`prod-sub-${i + 1}`}\n                modal={props.modal}\n                prodName={props.prodName}\n                ind={i}\n                id={props.prodId}\n                mainThumb={props.mainThumb}\n                subthumb={thumb}\n                handleButton={props.handleButton}\n              />\n            );\n          });\n          return (\n            <ol id={`${props.prodId}-sub-thumbnails`} className=\"sub-thumbnails\">\n              {listItems}\n            </ol>\n          );\n        };\n\n          function SubThumbnails(props) {\n            return (\n              <li id={props.prodId} className={props.mainThumb === props.subthumb ? \"sub-thumbnail\" : \"sub-thumbnail dimmed\"}>\n                <button\n                  type=\"button\"\n                  className=\"link\"\n                  disabled={props.mainThumb === props.subthumb ? true : false}\n                  value={props.ind}\n                  aria-label={`switch to thumbnail for option ${props.ind + 1}`}\n                  onClick={(e) => props.handleButton('thumb', e)}\n                  tabIndex={props.modal ? -1 : null}\n                >\n                  <img src={props.subthumb} alt={`${props.prodName} thumbnail`} className=\"thumbnails\" />\n                </button>\n              </li>\n            );\n          };\n\n        function Rating(props) {\n          //conditional for avg or user\n          const displayRating = [];\n          if (props.kind === 'user') { //user ratings\n            if (props.rating) { //if the user has already rated it, full and red outline\n              const ratingToShow = props.publishedRating ? props.publishedRating : props.rating;\n              //if in a review, user static rating, otherwise dynamically update\n              for (let i = 1; i <= ratingToShow; i++) {\n                displayRating.push(\n                  <Star\n                    key={`${props.user}-${props.kind}-star-${i}`}\n                    id={`${props.user}-${props.kind}-star-${i}`}\n                    ind={i}\n                    type={props.kind}\n                    section={props.section}\n                    kind={props.kind}\n                    reviewer={props.reviewer}\n                    handleButton={props.handleButton}\n                  />\n                );\n              };\n              //fill remaing slots with red outlines if not reviewers\n              if (!props.reviewer) {\n                while(displayRating.length < maxRating) {\n                  let i = displayRating.length + 1;\n                  displayRating.push(\n                    <Star\n                      key={`${props.user}-${props.kind}-star-${i}`}\n                      modal={props.modal}\n                      ind={i}\n                      id={`${props.user}-${props.kind}-star-${i}`}\n                      type='empty'\n                      section={props.section}\n                      kind={props.kind}\n                      handleButton={props.handleButton}\n                    />\n                  );\n                };\n              };\n            } else { //set all stars to empty black outlines\n              for (let i = 1; i <= maxRating; i++) {\n                displayRating.push(\n                  <Star\n                    key={`${props.user}-${props.kind}-star-${i}`}\n                    modal={props.modal}\n                    ind={i}\n                    id={`${props.user}-${props.kind}-star-${i}`}\n                    type='empty'\n                    section={props.section}\n                    kind={props.kind}\n                    handleButton={props.handleButton}\n                  />\n                );\n              };\n            };\n          } else {\n            if (props.whole > 0) { //whole stars\n              for (let i = 1; i <= props.whole; i++) {\n                displayRating.push(\n                  <Star\n                    key={`${props.section}-whole-star-${i}`}\n                    modal={props.modal}\n                    ind={i}\n                    id={`${props.section}-whole-star-${i}`}\n                    type='whole'\n                    section={props.section}\n                    kind={props.kind}\n                    handleButton={props.handleButton}\n                  />\n                );\n              };\n            };\n            if (props.half > 0) { //half stars\n              for (let i = 1; i <= props.half; i++) {\n                displayRating.push(\n                  <Star\n                    key={`${props.section}-half-star-${i}`}\n                    modal={props.modal}\n                    ind={i + props.whole}\n                    id={`${props.section}-half-star-${i}`}\n                    section={props.section}\n                    type='half'\n                    kind={props.kind}\n                    handleButton={props.handleButton}\n                  />\n                );\n              };\n            };\n            if (props.empty > 0) { //star outlines\n              for (let i = 1; i <= props.empty; i++) {\n                displayRating.push(\n                  <Star\n                    key={`${props.section}-empty-star-${i}`}\n                    modal={props.modal}\n                    ind={i + props.whole + props.half}\n                    id={`${props.section}-empty-star-${i}`}\n                    section={props.section}\n                    type='empty'\n                    kind={props.kind}\n                    handleButton={props.handleButton}\n                  />\n                );\n              };\n            };\n          };\n          return (\n            <div\n              id={props.kind === 'user' ? `${props.prodId}-${props.kind}-rating` : `${props.prodId}-${props.section}-${props.kind}-rating`}\n              className=\"rating\"\n            >\n              {displayRating}\n            </div>\n          );\n        };\n\n          function Star(props) {\n            //different kinds of stars\n            const starVariants = props.type === 'user' ?\n            <StarIcon fillColor={colorRed} /> :\n            props.type === 'whole' ?\n            <StarIcon fillColor={colorDarkGrey} /> :\n            props.type === 'half' ?\n            <StarHalf fillColor={colorDarkGrey} strokeColor={colorDarkGrey} /> :\n            <StarOutline strokeColor={props.kind === 'user' ? colorRed: colorDarkGrey} />;\n            return (\n              <>\n              {props.reviewer ? ( //static if in review\n                <i id={`${props.id}-icon`} className={`${props.type}-${props.ind}-star stars`}>\n                  <StarIcon fillColor={colorBlack} />\n                </i>\n              ) : props.kind === 'avg' && props.section !== 'info' ? ( //static if avg rating in review section\n                <i id={`${props.id}-icon`} className={`${props.type}-${props.ind}-star stars`}>\n                  {starVariants}\n                </i>\n              ) : (\n                <button\n                  type=\"button\"\n                  id={`${props.id}-icon`}\n                  className={`${props.type}-${props.ind}-star stars`}\n                  aria-label={`rate ${props.ind} star button`}\n                  value={props.ind}\n                  onClick={(e) => props.handleButton('star', e)}\n                  tabIndex={props.modal ? -1 : null}\n                >\n                  {starVariants}\n                </button>\n              )}\n              </>\n            );\n          };\n\n        function ReviewsLink(props) {\n          return (\n            <button type=\"button\" id={`${props.prodId}-reviews-link`} className=\"links\" tabIndex={props.modal ? -1 : null}>\n              Reviews ({props.reviewCount.toString()})\n            </button>\n          );\n        };\n\n        function Description(props) {\n          const productDescription = `This a description of your product. It’s very cool and very affordable. You’ll be the envy of all your friends should you buy this product. It’s THAT good.`;\n          return (\n            <p id={`${props.prodId}-description`} className=\"paragraphs\">\n              {productDescription}\n            </p>\n          );\n        };\n\n        function Price(props) {\n          return (\n            <strong id={`${props.prodId}-price`} className=\"prices\">\n              ${props.price.toFixed(2)}\n            </strong>\n          );\n        };\n\n        function AddToCart(props) {\n          const checkedCart = props.checkIfInCart({prodId: props.prodId, opt: props.opt}, deepCopy(props.itemsInCart), 'opt');\n          const dupeInCart = checkedCart.hasDupe;\n          const qtyInCart = dupeInCart ? checkedCart.cart[checkedCart.dupeIndex].qty : 0;\n          const qtyTogther = parseInt(props.qty) + parseInt(qtyInCart);\n          return (\n            <button\n              type=\"submit\"\n              id={`${props.id}-add-to-cart-button`}\n              className=\"add-to-cart buttons\"\n              aria-label=\"add to cart\"\n              disabled={qtyTogther > maxQty ? true : false}\n              tabIndex={props.modal ? -1 : null}\n            >\n              <span id=\"add-to-cart-span\">\n                <span>{!dupeInCart ? 'Add to Cart' : qtyTogther <= maxQty ? 'Update Cart' : 'Maxed Out'}</span>\n                <i>\n                  <CartIcon fillColor={colorWhite} />\n                </i>\n              </span>\n            </button>\n          );\n        };\n\n    //=============\n    //Reviews\n    //=============\n    function ReviewDisplay(props) {\n      return (\n        <section id={`${props.prodId}-reviews-display`} className=\"review-displays\">\n          <ProductReviews\n            modal={props.modal}\n            prodId={props.prodId}\n            userId={props.userId}\n            user={props.user}\n            loggedIn={props.loggedIn}\n            reviews={props.reviews}\n            sort={props.sort}\n            stars={props.stars}\n            reviewBody={props.reviewBody}\n            publishedRating={props.publishedRating}\n            editReview={props.editReview}\n            editOpen={props.editOpen}\n            checkFeedback={props.checkFeedback}\n            rating={props.rating}\n            avg={props.avg}\n            whole={props.whole}\n            half={props.half}\n            empty={props.empty}\n            handleButton={props.handleButton}\n            handleSubmit={props.handleSubmit}\n            handleInput={props.handleInput}\n            handleFocus={props.handleFocus}\n            handleText={props.handleText}\n            handleFilterReviews={props.handleFilterReviews}\n          />\n          {props.reviewSubmitted ? (\n            <div id=\"review-submitted\" className=\"review-prompts\">\n              <p>Thanks for your feedback!</p>\n            </div>\n          ) : (\n            <WriteProductReview\n              modal={props.modal}\n              prodId={props.prodId}\n              reviewBody={props.reviewBody}\n              rating={props.rating}\n              user={props.user}\n              userId={props.userId}\n              loggedIn={props.loggedIn}\n              handleSubmit={props.handleSubmit}\n              handleButton={props.handleButton}\n              handleFocus={props.handleFocus}\n              handleUsername={props.handleUsername}\n              handleText={props.handleText}\n            />\n          )}\n        </section>\n      );\n    };\n\n      function ProductReviews(props) {\n        return (\n          <section id={`${props.prodId}-reviews`} className=\"product-reviews\">\n            <h2 className=\"titles\">Reviews</h2>\n            <div>\n              <Rating\n                modal={props.modal}\n                prodId={props.prodId}\n                section=\"reviews\"\n                kind=\"avg\"\n                whole={props.whole}\n                half={props.half}\n                empty={props.empty}\n              />\n              <span>Avg Ratings ({props.avg})</span>\n            </div>\n            <form id=\"my-rating\">\n              <Rating\n                modal={props.modal}\n                prodId={props.prodId}\n                section=\"reviews\"\n                user={props.userId}\n                kind=\"user\"\n                rating={props.rating}\n                handleButton={props.handleButton}\n              />\n              <label htmlFor=\"my-rating\">{props.loggedIn ? 'Your rating' : 'Log in to rate'}</label>\n            </form>\n            <Reviews\n              modal={props.modal}\n              prodId={props.prodId}\n              currentUser={props.userId}\n              reviews={props.reviews}\n              sort={props.sort}\n              stars={props.stars}\n              publishedRating={props.publishedRating}\n              loggedIn={props.loggedIn}\n              editReview={props.editReview}\n              reviewBody={props.reviewBody}\n              editOpen={props.editOpen}\n              checkFeedback={props.checkFeedback}\n              handleButton={props.handleButton}\n              handleFocus={props.handleFocus}\n              handleInput={props.handleInput}\n              handleUsername={props.handleUsername}\n              handleText={props.handleText}\n              handleSubmit={props.handleSubmit}\n              handleFilterReviews={props.handleFilterReviews}\n            />\n          </section>\n        );\n      };\n\n        function Reviews(props) {\n          //filter out if not posted\n          const reviewList = props.reviews.filter(item => item.review && !item.hidden).map((review, i) => {\n            const reviewToShow = props.currentUser === review.id ? props.reviewBody : review.review;\n            return (\n              <Review\n                key={`review-${i + 1}`}\n                modal={props.modal}\n                currentUser={props.currentUser}\n                loggedIn={props.loggedIn}\n                prodId={props.prodId}\n                userId={review.id}\n                user={review.user}\n                date={review.date}\n                reviewBody={reviewToShow}\n                rating={review.rating}\n                publishedRating={review.publishedRating}\n                publishedReview={review.review}\n                editOpen={props.editOpen}\n                feedback={review.feedback}\n                checkFeedback={props.checkFeedback}\n                handleButton={props.handleButton}\n                handleFocus={props.handleFocus}\n                handleUsername={props.handleUsername}\n                handleText={props.handleText}\n                handleSubmit={props.handleSubmit}\n                editReview={props.editReview}\n              />\n            );\n          });\n          return (\n            <section id={`${props.prodId}-user-reviews`} className=\"reviews-container\">\n              <ReviewFilter modal={props.modal} handleFilterReviews={props.handleFilterReviews} sort={props.sort} />\n              <ReviewRatings modal={props.modal} reviews={props.reviews} handleInput={props.handleInput} stars={props.stars} />\n              {reviewList}\n            </section>\n          );\n        };\n\n          function ReviewFilter(props) {\n            return (\n              <form id=\"review-filter-form\">\n                <label htmlFor=\"review-filter-form\">Sort by: </label>\n                <select value={props.sort} onChange={(e) => props.handleFilterReviews(e)} tabIndex={props.modal ? -1 : null}>\n                  <option value=\"helpful\">Most Helpful</option>\n                  <option value=\"recent\">Recent</option>\n                  <option value=\"old\">Oldest</option>\n                  {/* <option value=\"controversial\">Controversial</option> */}\n                </select>\n            </form>\n            );\n          };\n\n          function ReviewRatings(props) {\n            const ratingsSort = [];\n            for (let i = 0; i < maxRating; i++) {\n              ratingsSort.push(\n                <ReviewRatingInputs\n                  key={`rating-sort-${i + 1}`}\n                  modal={props.modal}\n                  val={i + 1}\n                  handleInput={props.handleInput}\n                  reviews={props.reviews}\n                  stars={props.stars}\n                />\n              );\n            };\n            return (\n              <form id=\"review-ratings-form\">\n                <label htmlFor=\"review-ratings-form\">Sort By Rating</label>\n                <div>\n                  <input\n                    type=\"radio\"\n                    name=\"review-ratings\"\n                    id=\"all-stars\"\n                    value={0}\n                    checked={props.stars === 0}\n                    onChange={(e) => props.handleInput('ratings', e)}\n                    tabIndex={props.modal ? -1 : null}\n                  />\n                  <label htmlFor=\"all-stars\" aria-label=\"show all star ratings\">All</label>\n                </div>\n                {ratingsSort}\n              </form>\n            );\n          };\n\n            function ReviewRatingInputs(props) {\n              const stars = [];\n              const num = props.reviews.filter(review => review.publishedRating === props.val).length;\n              for (let i = 0; i < props.val; i++) {\n                stars.push(\n                  <StarIcon key={`${props.val}-star-${i + 1}`} fillColor={colorDarkGrey} />\n                );\n              };\n              return (\n                <div>\n                  <input\n                    type=\"radio\"\n                    id={`${props.val}-star`}\n                    name=\"review-ratings\"\n                    value={props.val}\n                    checked={props.stars === props.val}\n                    onChange={(e) => props.handleInput('ratings', e)}\n                    tabIndex={props.modal ? -1 : null}\n                  />\n                  <label htmlFor={`${props.val}-star`} aria-label={`sort by ${props.val}`}>\n                    {stars}\n                    <span>({num})</span>\n                  </label>\n                </div>\n              );\n            };\n\n          function Review(props) {\n            return (\n              <article id={`${props.userId}-review`} className={props.userId === props.currentUser ? \"current-user reviews\" : \"reviews\"}>\n                <h4 className=\"names\">{props.user.toUpperCase()}</h4>\n                <span className=\"dates\">{props.date}</span>\n                {props.editOpen && props.userId === props.currentUser ? (\n                  <WriteProductReview\n                    modal={props.modal}\n                    user={props.user}\n                    userId={props.userId}\n                    loggedIn={props.loggedIn}\n                    reviewBody={props.reviewBody}\n                    publishedReview={props.publishedReview}\n                    rating={props.rating}\n                    publishedRating={props.publishedRating}\n                    handleButton={props.handleButton}\n                    handleFocus={props.handleFocus}\n                    handleUsername={props.handleUsername}\n                    handleText={props.handleText}\n                    handleSubmit={props.handleSubmit}\n                    editReview={props.editReview}\n                    editOpen={props.editOpen}\n                  />\n                ) : (\n                  <>\n                  <p className=\"comments paragraphs\">{props.reviewBody}</p>\n                  <Rating\n                    modal={props.modal}\n                    prodId={props.prodId}\n                    rating={props.rating}\n                    publishedRating={props.publishedRating}\n                    kind=\"user\"\n                    section=\"review\"\n                    user={props.userId}\n                    reviewer={true}\n                  />\n                  <Feedback\n                    modal={props.modal}\n                    prodId={props.prodId}\n                    userId={props.userId}\n                    currentUser={props.currentUser}\n                    feedback={props.feedback}\n                    checkFeedback={props.checkFeedback}\n                    handleButton={props.handleButton}\n                  />\n                  </>\n                )}\n                {props.userId === props.currentUser && !props.editOpen ? (\n                  <button\n                    type=\"button\"\n                    id=\"edit-review\"\n                    className=\"buttons\"\n                    onClick={() => props.editReview()}\n                    tabIndex={props.modal ? -1 : null}\n                  >\n                    Edit Review\n                  </button>\n                ) : ''}\n              </article>\n            );\n          };\n\n            function Feedback(props) {\n              const thumbed = props.checkFeedback(props.userId);\n              return (\n                <div id={`${props.prodId}-${props.userId}-feedback`} className=\"feedback\">\n                  <button\n                    type=\"button\"\n                    className=\"thumbs-down\"\n                    disabled={props.currentUser === props.userId ? true : false}\n                    value=\"down\"\n                    onClick={(e) => props.handleButton({type: 'feedback', user: props.userId}, e)}\n                    tabIndex={props.modal ? -1 : null}\n                  >\n                    <ThumbsDownIcon\n                      fillColor={thumbed === 'down' ? colorRed : colorDarkGrey}\n                      //set opacity based on if user has thumbed or not\n                      opacity={thumbed === 'down' ? 1 : thumbed === 'up' ? 0.25 : props.feedback.down > props.feedback.up ? 1 : 0.25}\n                    />\n                    ({props.feedback.down})\n                  </button>\n                  <button\n                    type=\"button\"\n                    className=\"thumbs-up\"\n                    disabled={props.currentUser === props.userId ? true : false}\n                    data-user={props.userId}\n                    value=\"up\"\n                    onClick={(e) => props.handleButton({type: 'feedback', user: props.userId}, e)}\n                    tabIndex={props.modal ? -1 : null}\n                  >\n                    <ThumbsUpIcon\n                      fillColor={thumbed === 'up' ? colorRed : colorDarkGrey}\n                      opacity={thumbed === 'up' ? 1 : thumbed === 'down' ? 0.25 : props.feedback.down < props.feedback.up ? 1 : 0.25}\n                    />\n                    ({props.feedback.up})\n                  </button>\n                </div>\n              );\n            };\n\n      function WriteProductReview(props) {\n        //determine if submit button should be enabled based on content of edit\n        const disableEdit = props.editOpen && props.rating === props.publishedRating && props.reviewBody === props.publishedReview ? true : false;\n        return (\n          <form\n            id={`${props.prodId}-write-review-form`}\n            className=\"write-review-form\"\n            onSubmit={(e) => props.handleSubmit(null, 'write', e)}\n          >\n            {props.loggedIn ?\n              <label htmlFor={`${props.prodId}-write-review-form`} className=\"titles\">{props.editOpen ? 'Edit your review' : 'Write a review'}</label> :\n              <p id=\"review-must-login\" className=\"review-prompts\">You must be logged in to leave a review.</p>\n            }\n            <WriteReview\n              modal={props.modal}\n              user={props.user}\n              userId={props.userId}\n              loggedIn={props.loggedIn}\n              reviewBody={props.reviewBody}\n              editOpen={props.editOpen}\n              rating={props.rating}\n              handleButton={props.handleButton}\n              handleFocus={props.handleFocus}\n              handleUsername={props.handleUsername}\n              handleText={props.handleText}\n            />\n            {props.loggedIn ?\n              <button type=\"submit\" className=\"buttons\" disabled={disableEdit} tabIndex={props.modal ? -1 : null}>Submit</button> :\n              <button type=\"submit\" className=\"buttons\" disabled tabIndex={props.modal ? -1 : null}>Login First</button>\n            }\n            {props.editOpen ? <button type=\"button\" className=\"buttons\" onClick={(e) => props.handleButton('cancel', e)} tabIndex={props.modal ? -1 : null}>Cancel</button> : null}\n          </form>\n        );\n      };\n\n        function WriteReview(props) {\n          return (\n            <fieldset>\n              <div>\n              <span id=\"write-username\" className=\"usernames\">{props.loggedIn && !props.editOpen ? `Posting as ${props.user}` : ''}</span>\n              <textarea\n                name=\"review-body\"\n                id=\"write-review\"\n                cols=\"30\"\n                rows=\"10\"\n                maxLength=\"255\"\n                placeholder={props.editOpen ? null : \"Max length 255 chars\"}\n                defaultValue={props.editOpen ? props.reviewBody : ''}\n                onChange={(e) => props.handleText(e)}\n                tabIndex={props.modal ? -1 : null}\n                required\n              />\n              <span id=\"character-count\">{255 - props.reviewBody.length}</span>\n              <Rating\n                modal={props.modal}\n                user={props.userId}\n                section=\"write\"\n                kind=\"user\"\n                rating={props.rating}\n                handleButton={props.handleButton}\n              />\n              </div>\n            </fieldset>\n          );\n        };\n\n  //====================\n  //Footer\n  //====================\n  function Footer(props) {\n    return (\n      <footer>\n        Site copyright <a href=\"https://www.kylejackson.dev\" tabIndex={props.modal ? -1 : null}>Kyle Jackson</a> 2019. All Rights Reserved.\n      </footer>\n    );\n  }\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './normalize.css';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}